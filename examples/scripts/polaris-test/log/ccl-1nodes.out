NCCL TEST with MSCCL 2 channel 2gpus 2 steps
# nThread 1 nGpus 1 minBytes 1024 maxBytes 268435456 step: 2(factor) warmup iters: 5 iters: 60 agg iters: 1 validation: 1 graph: 0
#
# Using devices
#  Rank  0 Group  0 Pid  58550 on x3109c0s37b0n0 device  0 [0x07] NVIDIA A100-SXM4-40GB
#  Rank  1 Group  0 Pid  58551 on x3109c0s37b0n0 device  1 [0x46] NVIDIA A100-SXM4-40GB
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NCCL_SOCKET_IFNAME set by environment to hsn0,hsn1
x3109c0s37b0n0:58550:58550 [0] NCCL INFO Bootstrap : Using hsn1:10.201.1.174<0>
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NET/Plugin: Failed to find ncclCollNetPlugin_v5 symbol.
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NET/Plugin: Failed to find ncclCollNetPlugin_v4 symbol.
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NET/OFI Initializing aws-ofi-nccl 1.7.4-aws
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NET/OFI Using CUDA runtime version 11080
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NET/OFI Selected Provider is cxi (found 4 nics)
x3109c0s37b0n0:58550:58550 [0] NCCL INFO NET/OFI Using transport protocol SENDRECV
x3109c0s37b0n0:58550:58550 [0] NCCL INFO Using network AWS Libfabric
NCCL version 2.12.12.MSCCL.0.7.4+cuda11.8
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NCCL_SOCKET_IFNAME set by environment to hsn0,hsn1
x3109c0s37b0n0:58551:58551 [1] NCCL INFO Bootstrap : Using hsn1:10.201.1.174<0>
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NET/Plugin: Failed to find ncclCollNetPlugin_v5 symbol.
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NET/Plugin: Failed to find ncclCollNetPlugin_v4 symbol.
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NET/OFI Initializing aws-ofi-nccl 1.7.4-aws
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NET/OFI Using CUDA runtime version 11080
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NET/OFI Selected Provider is cxi (found 4 nics)
x3109c0s37b0n0:58551:58551 [1] NCCL INFO NET/OFI Using transport protocol SENDRECV
x3109c0s37b0n0:58551:58551 [1] NCCL INFO Using network AWS Libfabric
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 00/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 01/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 02/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 03/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 04/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 05/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 06/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 07/08 :    0   1
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Trees [0] 1/-1/-1->0->-1 [1] 1/-1/-1->0->-1 [2] 1/-1/-1->0->-1 [3] 1/-1/-1->0->-1 [4] 1/-1/-1->0->-1 [5] 1/-1/-1->0->-1 [6] 1/-1/-1->0->-1 [7] 1/-1/-1->0->-1
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Trees [0] -1/-1/-1->1->0 [1] -1/-1/-1->1->0 [2] -1/-1/-1->1->0 [3] -1/-1/-1->1->0 [4] -1/-1/-1->1->0 [5] -1/-1/-1->1->0 [6] -1/-1/-1->1->0 [7] -1/-1/-1->1->0
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 00 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 01 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 02 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 03 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 04 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 05 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 06 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Channel 07 : 1[46000] -> 0[7000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 00 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 01 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 02 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 03 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 04 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 05 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 06 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Channel 07 : 0[7000] -> 1[46000] via P2P/IPC/read
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Connected all rings
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Connected all trees
x3109c0s37b0n0:58551:58568 [1] NCCL INFO MSCCL_XML_FILES set by environment to /home/yuke/ncclPG/CCL-LYD/msccl_tools_lyd/examples/xml/xml_lyd/binary_h_gpu01_reverse_p/allreduce_binary_tree_p_gpu01_1nodes_2gpus_channel2_chunk2.xml
x3109c0s37b0n0:58551:58568 [1] NCCL INFO MSCCL: Parsing algorithm /home/yuke/ncclPG/CCL-LYD/msccl_tools_lyd/examples/xml/xml_lyd/binary_h_gpu01_reverse_p/allreduce_binary_tree_p_gpu01_1nodes_2gpus_channel2_chunk2.xml
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Connected all rings
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Connected all trees
x3109c0s37b0n0:58550:58567 [0] NCCL INFO MSCCL_XML_FILES set by environment to /home/yuke/ncclPG/CCL-LYD/msccl_tools_lyd/examples/xml/xml_lyd/binary_h_gpu01_reverse_p/allreduce_binary_tree_p_gpu01_1nodes_2gpus_channel2_chunk2.xml
x3109c0s37b0n0:58550:58567 [0] NCCL INFO MSCCL: Parsing algorithm /home/yuke/ncclPG/CCL-LYD/msccl_tools_lyd/examples/xml/xml_lyd/binary_h_gpu01_reverse_p/allreduce_binary_tree_p_gpu01_1nodes_2gpus_channel2_chunk2.xml
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Parsed MSCCL Algorithm /home/yuke/ncclPG/CCL-LYD/msccl_tools_lyd/examples/xml/xml_lyd/binary_h_gpu01_reverse_p/allreduce_binary_tree_p_gpu01_1nodes_2gpus_channel2_chunk2.xml successfully.
x3109c0s37b0n0:58551:58568 [1] NCCL INFO Connected 1 MSCCL algorithms
x3109c0s37b0n0:58551:58568 [1] NCCL INFO NCCL_NTHREADS set by environment to 512.
x3109c0s37b0n0:58551:58568 [1] NCCL INFO NCCL_PROTO set by environment to Simple
x3109c0s37b0n0:58551:58568 [1] NCCL INFO NCCL_ALGO set by environment to MSCCL,TREE,RING
x3109c0s37b0n0:58551:58568 [1] NCCL INFO threadThresholds 8/8/64 | 16/8/64 | 8/8/64 | 8/8/512
x3109c0s37b0n0:58551:58568 [1] NCCL INFO 8 coll channels, 8 p2p channels, 8 p2p channels per peer
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Parsed MSCCL Algorithm /home/yuke/ncclPG/CCL-LYD/msccl_tools_lyd/examples/xml/xml_lyd/binary_h_gpu01_reverse_p/allreduce_binary_tree_p_gpu01_1nodes_2gpus_channel2_chunk2.xml successfully.
x3109c0s37b0n0:58550:58567 [0] NCCL INFO Connected 1 MSCCL algorithms
x3109c0s37b0n0:58550:58567 [0] NCCL INFO NCCL_NTHREADS set by environment to 512.
x3109c0s37b0n0:58550:58567 [0] NCCL INFO NCCL_PROTO set by environment to Simple
x3109c0s37b0n0:58550:58567 [0] NCCL INFO NCCL_ALGO set by environment to MSCCL,TREE,RING
x3109c0s37b0n0:58550:58567 [0] NCCL INFO threadThresholds 8/8/64 | 16/8/64 | 8/8/64 | 8/8/512
x3109c0s37b0n0:58550:58567 [0] NCCL INFO 8 coll channels, 8 p2p channels, 8 p2p channels per peer
x3109c0s37b0n0:58550:58567 [0] NCCL INFO comm 0x1462f445a010 rank 0 nranks 2 cudaDev 0 busId 7000 - Init COMPLETE
x3109c0s37b0n0:58551:58568 [1] NCCL INFO comm 0x14ab3c45a010 rank 1 nranks 2 cudaDev 1 busId 46000 - Init COMPLETE
#
#                                                              out-of-place                       in-place          
#       size         count      type   redop    root     time   algbw   busbw #wrong     time   algbw   busbw #wrong
#        (B)    (elements)                               (us)  (GB/s)  (GB/s)            (us)  (GB/s)  (GB/s)       
x3109c0s37b0n0:58550:58550 [0] NCCL INFO Launch mode Parallel
        1024           256     float     sum      -1    35.18    0.03    0.03    512    35.01    0.03    0.03      0
        2048           512     float     sum      -1    35.02    0.06    0.06   1024    34.94    0.06    0.06      0
        4096          1024     float     sum      -1    35.29    0.12    0.12   2048    35.26    0.12    0.12      0
        8192          2048     float     sum      -1    36.42    0.22    0.22   4096    36.43    0.22    0.22      0
       16384          4096     float     sum      -1    37.00    0.44    0.44   8192    37.06    0.44    0.44      0
       32768          8192     float     sum      -1    38.27    0.86    0.86  16384    38.22    0.86    0.86      0
       65536         16384     float     sum      -1    40.72    1.61    1.61  32768    40.58    1.62    1.62      0
      131072         32768     float     sum      -1    42.79    3.06    3.06  65536    42.84    3.06    3.06      0
      262144         65536     float     sum      -1    50.35    5.21    5.21  131072    50.52    5.19    5.19      0
      524288        131072     float     sum      -1    64.87    8.08    8.08  262144    64.93    8.07    8.07      0
     1048576        262144     float     sum      -1    80.38   13.05   13.05  524288    80.26   13.07   13.07      0
     2097152        524288     float     sum      -1    126.9   16.52   16.52  1.04858e+06    126.9   16.53   16.53      0
     4194304       1048576     float     sum      -1    219.0   19.15   19.15  2.09715e+06    218.9   19.16   19.16      0
     8388608       2097152     float     sum      -1    354.5   23.67   23.67  4.1943e+06    354.2   23.69   23.69      0
    16777216       4194304     float     sum      -1    626.3   26.79   26.79  8.38861e+06    626.3   26.79   26.79      0
    33554432       8388608     float     sum      -1   1167.5   28.74   28.74  1.67772e+07   1167.3   28.75   28.75      0
    67108864      16777216     float     sum      -1   2247.1   29.87   29.87  3.35544e+07   2247.4   29.86   29.86      0
   134217728      33554432     float     sum      -1   4405.2   30.47   30.47  6.71088e+07   4405.5   30.47   30.47      0
   268435456      67108864     float     sum      -1   8721.5   30.78   30.78  1.34218e+08   8723.1   30.77   30.77      0
x3109c0s37b0n0:58550:58550 [0] NCCL INFO comm 0x1462f445a010 rank 0 nranks 2 cudaDev 0 busId 7000 - Destroy COMPLETE
x3109c0s37b0n0:58551:58551 [1] NCCL INFO comm 0x14ab3c45a010 rank 1 nranks 2 cudaDev 1 busId 46000 - Destroy COMPLETE
# Out of bounds values : 38 FAILED
# Avg bus bandwidth    : 12.5646 
#

